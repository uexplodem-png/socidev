---
applyTo: '**'
---
# Copilot Instructions for this Project

## Important Guidelines
- **DO NOT create summary files** (no SUMMARY.md, COMPLETION_SUMMARY.md, etc.)
- **DO NOT create documentation files** for tracking progress
- Focus only on actual code changes and fixes
- Keep all explanations in the chat, not in files
- Work directly with the existing codebase without adding new meta-files

## Project Context
- This is a full-stack social media management platform
- Stack: React (frontend/admin-panel), Node.js/Express (backend), MySQL (database)
- Three running apps: Backend (3000), Admin Panel (5173), Frontend (5174)

## When working on tasks:
1. Make direct code changes only
2. Test changes and verify they work
3. Report results in chat (not in files)
4. Suggest next steps conversationally

## GitHub Backup Protocol
**IMPORTANT: Back up every action to GitHub!**
After every significant change or task completion:
1. Stage changes: `git add .`
2. Commit with clear message: `git commit -m "Description of changes"`
3. Push to GitHub: `git push`

GitHub Repository: https://github.com/uexplodem-png/socidev
- Keep commits small and meaningful
- Use present tense in commit messages (e.g., "Add user validation" not "Added")
- Push frequently to maintain backup

## Commands to Remember
- Backend: `/Users/velatertach/Downloads/projects/project\ 5/backend_combined`
- Admin Panel: `/Users/velatertach/Downloads/projects/project\ 5/admin-panel`
- Frontend: `/Users/velatertach/Downloads/projects/project\ 5/frontend`

## Database Optimization Best Practices
**ALWAYS follow these rules when writing database queries:**

### 1. Never Use SELECT * Queries
```javascript
// ❌ BAD - Fetches all fields
const user = await User.findByPk(id);

// ✅ GOOD - Fetches only needed fields
const user = await User.findByPk(id, {
  attributes: ['id', 'firstName', 'lastName', 'email']
});
```

### 2. Use Selective Field Fetching
- Always specify `attributes` array in Sequelize queries
- Only fetch fields that are actually needed
- Reduces memory usage and network transfer
- Example: Profile query needs 10 fields, not all 20+ fields

### 3. Avoid N+1 Query Problems
```javascript
// ❌ BAD - N+1 queries
const orders = await Order.findAll();
for (let order of orders) {
  const user = await User.findByPk(order.userId); // N queries!
}

// ✅ GOOD - Single query with eager loading
const orders = await Order.findAll({
  attributes: ['id', 'status', 'total'],
  include: [{
    model: User,
    attributes: ['id', 'firstName', 'email']
  }]
});
```

### 4. Use raw: true for Aggregations
```javascript
// ✅ For SUM, COUNT, AVG queries
const result = await Order.findOne({
  where: { userId },
  attributes: [[sequelize.fn('SUM', sequelize.col('amount')), 'total']],
  raw: true  // Returns plain object, faster
});
const total = parseFloat(result?.total) || 0;
```

### 5. Index Common Query Patterns
- Always index foreign keys (user_id, order_id, task_id)
- Index status and date fields used in WHERE clauses
- Create composite indexes for common JOIN patterns
- Example: `user_id + status` for filtered listings

### 6. Protect Sensitive Data
- Never expose password fields in queries
- Use field selection to prevent data leaks
- Sanitize user data before returning to client

### 7. Optimize Includes
```javascript
// ✅ Only include what you need
include: [{
  model: User,
  attributes: ['id', 'username'],  // Not all user fields
  required: false  // LEFT JOIN if optional
}]
```

### 8. Use Pagination Properly
```javascript
// ✅ Always paginate large result sets
const { rows, count } = await Order.findAndCountAll({
  where,
  attributes: ['id', 'status', 'createdAt'],  // Select fields
  limit: parseInt(limit),
  offset: (page - 1) * limit,
  order: [['createdAt', 'DESC']]
});
```

### Quick Checklist Before Committing:
- [ ] No SELECT * queries (always use `attributes`)
- [ ] Includes have field selection
- [ ] Aggregations use `raw: true`
- [ ] Foreign keys are indexed
- [ ] Sensitive data is excluded
- [ ] Large result sets are paginated

## Terminal Auto-Approve Settings
"chat.agent.maxRequests": 300,
"chat.tools.terminal.enableAutoApprove": true,
"chat.tools.terminal.autoApprove": {
    "rm": false,
    "rmdir": false,
    "del": false,
    "kill": false,
    "curl": false,
    "wget": false,
    "eval": false,
    "chmod": false,
    "chown": false,
    "/^Remove-Item\\b/i": false
}